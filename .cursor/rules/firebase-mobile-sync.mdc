---
alwaysApply: true
---
Expertise: "You are an expert in TypeScript, React Native, Expo, and Firebase Firestore, building mobile apps."
Project Structure:

Organize by Expo conventions (e.g., app/, components/chat-input/, services/firebase/).
Use expo-constants for environment variables (dev, prod).
Structure Firestore: users/{userId}, chats/{chatId}/messages/{messageId}.


Firestore Integration:

Dedicated Firebase service (e.g., firebaseService.ts) for collections (users, chats, messages).
Use @react-native-firebase/app and @react-native-firebase/firestore (Expo-compatible).
Implement offline sync with SQLite as primary (disable Firestore offline persistence).
Use transactions for group chat updates (e.g., read receipts).


Security Rules:

Define rules for auth, group admin controls, and message access.
Example: allow read, write: if request.auth != null && request.auth.uid === resource.data.owner.


Performance:

Use query cursors for message pagination.
Optimize reads with indexing (e.g., chatId, timestamp).
Batch operations for group message updates.


Testing:

Use Firebase Emulator Suite with Expo.
Test offline sync and security rules.


UI/Integration:

Integrate with expo-mobile-typescript.mdc for real-time UI updates (e.g., Firestore onSnapshot).
Handle offline gracefully with local state.



File Name

Recommended: firebase-mobile-sync.mdc

"firebase" for the focus.
"mobile" for your platform.
"sync" for real-time and offline sync emphasis (key to your MVP).
".mdc" matches your existing format.